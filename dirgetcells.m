function finalname = dirgetcells% Get sorted list of all cells in the current directory%d = dir(['*.mat']);cellname = [];namecount = 0;for i = 1:length(d)	fname = d(i).name;	zz = findstr(fname, '_');	if ~isempty(zz)		namecount = namecount + 1;		cellname{namecount} = fname(1:zz(1)-1);%		filenum(namecount) = fname(end-5:end-4);	endendif isempty(cellname)	warning(['No appropriate .mat files found in this directory.']);	returnend[sorted ii] = sort(cellname);% filenum = filenum(ii);prevname = '';finalcount = 0;for i = 1:length(sorted)	if strcmp(prevname, sorted{i}) == 0		finalcount = finalcount + 1;		finalname{finalcount} = sorted{i};		prevname = sorted{i};%		max_filenum(finalcount) = filenum(i);% 	else% 		if filenum(i) > max_filenum(finalcount)% 			max_filenum(finalcount) = filenum(i);% 		end	endend